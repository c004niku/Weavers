@using GridMvc.Html
@model UserDetailModel
@{
    ViewBag.Title = "User List";
    ViewBag.Header = "User for Weaver app";
    ViewBag.OptionalDescription = "All users for app";
}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<div class="card card-lime">
    <div class="card-header">
        <h3 class="card-title">User List</h3>

        <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
            </button>
        </div>
        <!-- /.card-tools -->
    </div>
    <!-- /.card-header -->
    <div class="card-body">
       
        @Html.Grid(Model.UserEntities).Columns(columns =>
   {
       columns.Add().Encoded(false)
      .Sanitized(false)
      .SetWidth(80)
      .RenderValueAs(o => string.Format("<img src='{0}' height='50px' width='80px'", o.userProfessionalDetail.Photo));
       columns.Add(c => c.userBasicEntity.FullName).Titled("Name").Filterable(false);
       columns.Add(c => c.userBasicEntity.MobileNumber).Titled("Mobile").Filterable(false);
       columns.Add(c => c.userBasicEntity.UserType).Titled("Type").Filterable(false);
       columns.Add(c => c.userProfessionalDetail.Status).Titled("Status").Filterable(false);
       columns.Add().Encoded(false)
       .Sanitized(false)
       .SetWidth(30)
       .RenderValueAs(o=>Html.AnchorLink("editUser", "View", string.Format("uname={0} umobile={1} utype={2} uworkingsince={3}", o.userBasicEntity.FullName, o.userBasicEntity.MobileNumber, o.userBasicEntity.UserType, o.userProfessionalDetail.WorkingSince) ));

   }).WithPaging(5).Sortable(true)
    </div>
</div>

<div class="modal fade" id="addItem" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" onclick="ClearInput()" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            @using (Html.BeginForm("Save", "News", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
        <div class="modal-body">
            <div class="row">
                <div class="col-xs-3">
                    Name
                </div>
                <div class="col-xs-9">
                    <input class="form-control" id="userName" disabled name="userName" type="text">
                </div>
            </div>
            <div class="row">
                <div class="col-xs-3">
                    Mobile
                </div>
                <div class="col-xs-9">
                    <input class="form-control" id="userMobile" disabled name="userMobile" type="text">
                </div>
            </div>
            <div class="row">
                <div class="col-xs-3">
                    Type
                </div>
                <div class="col-xs-9">
                    <input class="form-control" id="userType" name="userType" disabled type="text">
                </div>
            </div>
            <div class="row">
                <div class="col-xs-3">
                    Working Since
                </div>
                <div class="col-xs-9">
                    <input class="form-control" id="uworkingsince" name="uworkingsince" disabled type="text">
                </div>
            </div>           
        </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" onclick="ClearInput()" data-dismiss="modal">Close</button>
                    @*<button type="submit" class="btn btn-primary bntSave">Save</button>*@
                </div>
            }
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<script>
    $(document).ready(function () {
        console.log('executing');
        $(".editUser").click(function (event) {
           // event.preventDefault(); // cancel default behavior
            var userName = $(this).attr('uname');
            $('#userName').val(userName);
            $('#userMobile').val($(this).attr('umobile'));
            $('#userType').val($(this).attr('utype'));
            $('#uworkingsince').val($(this).attr('uworkingsince'));
            addNewValue('View ' + userName+' detail');
            //... rest of add logic
        });
    });

    function UpdateProductLabel(e) {
          event.preventDefault(); // cancel default behavior
      
    }
    function ClearInput() {
        $("#codevalue").val('');
        $("#codetype").val('');
    }
    function addNewValue(val) {
        $('#codetype').val(val);
        $('.modal-title').html(val);
        $('#addItem').modal('show');
    }
</script>

